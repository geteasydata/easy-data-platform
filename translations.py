"""
Translations - Bilingual Support (Arabic/English)
"""

TRANSLATIONS = {
    # App Title and Welcome
    'app_title': {
        'ar': 'ðŸ¤– Ø®Ø¨ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø°ÙƒÙŠ',
        'en': 'ðŸ¤– AI Data Scientist Expert'
    },
    'app_subtitle': {
        'ar': 'Ù…Ø­Ù„Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø®Ø¨Ø±Ø© 30+ Ø¹Ø§Ù… - ÙÙ‚Ø· Ø§Ø±ÙØ¹ Ù…Ù„ÙØ§ØªÙƒ ÙˆØ³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¨Ø§Ù„Ø¨Ø§Ù‚ÙŠ',
        'en': 'Expert Data Analyst with 30+ years experience - Just upload your files and let AI do the rest'
    },
    'welcome_title': {
        'ar': 'ðŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ',
        'en': 'ðŸ‘‹ Welcome'
    },
    'welcome_text': {
        'ar': 'Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.\nÙ„Ø§ ØªØ­ØªØ§Ø¬ Ù„Ø®Ø¨Ø±Ø© Ø¨Ø±Ù…Ø¬ÙŠØ©.. ÙÙ‚Ø· Ø§Ø±ÙØ¹ Ù…Ù„ÙØ§ØªÙƒ ÙˆØ³Ø£Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø¨Ø§Ù‚ÙŠ.',
        'en': "I'm your AI Data Science assistant.\nNo programming experience needed - just upload your files and I'll do the rest."
    },
    
    # Language Selection
    'select_language': {
        'ar': 'Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©',
        'en': 'Select Language'
    },
    
    # File Upload
    'upload_files': {
        'ar': 'ðŸ“‚ Ø§Ø±ÙØ¹ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
        'en': 'ðŸ“‚ Upload Data Files'
    },
    'upload_help': {
        'ar': 'ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ Ø£Ùˆ Ø£ÙƒØ«Ø± (CSV, Excel, JSON, Parquet)',
        'en': 'You can upload one or more files (CSV, Excel, JSON, Parquet)'
    },
    'files_loaded': {
        'ar': 'âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø¨Ù†Ø¬Ø§Ø­!',
        'en': 'âœ… Files loaded successfully!'
    },
    'rows': {
        'ar': 'ØµÙ',
        'en': 'rows'
    },
    'columns': {
        'ar': 'Ø¹Ù…ÙˆØ¯',
        'en': 'columns'
    },
    
    # Data Preview
    'data_preview': {
        'ar': 'ðŸ‘€ Ù†Ø¸Ø±Ø© Ø³Ø±ÙŠØ¹Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
        'en': 'ðŸ‘€ Data Preview'
    },
    
    # Target Selection
    'select_target': {
        'ar': 'ðŸŽ¯ Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù† ÙŠØªÙˆÙ‚Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ',
        'en': 'ðŸŽ¯ What do you want AI to predict?'
    },
    'target_help': {
        'ar': 'Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ ØªÙˆÙ‚Ø¹Ù‡Ø§',
        'en': 'Select the column containing the value to predict'
    },
    
    # API Key
    'api_key_section': {
        'ar': 'ðŸ”‘ Ù…ÙØªØ§Ø­ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)',
        'en': 'ðŸ”‘ AI API Key (Optional)'
    },
    'api_key_help': {
        'ar': 'Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Gemini API Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„Ø§Øª Ø£Ø¹Ù…Ù‚ (Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ)',
        'en': 'Enter Gemini API key for deeper insights (leave empty for basic analysis)'
    },
    
    # Start Button
    'start_analysis': {
        'ar': 'ðŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„',
        'en': 'ðŸš€ Start Full Analysis'
    },
    
    # Progress Messages
    'progress_scanning': {
        'ar': 'ðŸ” Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...',
        'en': 'ðŸ” Scanning data...'
    },
    'progress_cleaning': {
        'ar': 'ðŸ§¹ Ø¬Ø§Ø±ÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...',
        'en': 'ðŸ§¹ Cleaning data...'
    },
    'progress_training': {
        'ar': 'ðŸ§  Ø¬Ø§Ø±ÙŠ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£ÙØ¶Ù„...',
        'en': 'ðŸ§  Training models and selecting the best...'
    },
    'progress_insights': {
        'ar': 'ðŸ’¡ Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø¤Ù‰ ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª...',
        'en': 'ðŸ’¡ Generating insights and recommendations...'
    },
    'progress_reports': {
        'ar': 'ðŸ“„ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±...',
        'en': 'ðŸ“„ Preparing reports...'
    },
    'progress_done': {
        'ar': 'âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡!',
        'en': 'âœ… Complete!'
    },
    
    # Results Section
    'results_title': {
        'ar': 'ðŸ“Š Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„',
        'en': 'ðŸ“Š Analysis Results'
    },
    'problem_type': {
        'ar': 'Ù†ÙˆØ¹ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©',
        'en': 'Problem Type'
    },
    'classification': {
        'ar': 'ØªØµÙ†ÙŠÙ',
        'en': 'Classification'
    },
    'regression': {
        'ar': 'ØªÙˆÙ‚Ø¹ Ø±Ù‚Ù…',
        'en': 'Regression'
    },
    'best_model': {
        'ar': 'Ø£ÙØ¶Ù„ Ù†Ù…ÙˆØ°Ø¬',
        'en': 'Best Model'
    },
    'accuracy': {
        'ar': 'Ø§Ù„Ø¯Ù‚Ø©',
        'en': 'Accuracy'
    },
    'rows_processed': {
        'ar': 'Ø§Ù„ØµÙÙˆÙ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
        'en': 'Rows Processed'
    },
    'features_count': {
        'ar': 'Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙŠØ²Ø§Øª',
        'en': 'Features Count'
    },
    
    # Insights Section
    'insights_title': {
        'ar': 'ðŸ§  ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®Ø¨ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ',
        'en': 'ðŸ§  AI Expert Analysis'
    },
    
    # Feature Importance
    'feature_importance': {
        'ar': 'ðŸ”¥ Ø£Ù‡Ù… Ø§Ù„Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„Ù…Ø¤Ø«Ø±Ø©',
        'en': 'ðŸ”¥ Most Important Features'
    },
    'feature_importance_desc': {
        'ar': 'Ù‡Ø°Ù‡ Ø§Ù„Ø¹ÙˆØ§Ù…Ù„ Ù‡ÙŠ Ø§Ù„Ø£ÙƒØ«Ø± ØªØ£Ø«ÙŠØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©',
        'en': 'These factors have the most impact on the result'
    },
    
    # Target Distribution
    'target_distribution': {
        'ar': 'ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‡Ø¯Ù',
        'en': 'Target Distribution'
    },
    
    # Cleaning Steps
    'cleaning_steps': {
        'ar': 'ðŸ› ï¸ Ø®Ø·ÙˆØ§Øª ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
        'en': 'ðŸ› ï¸ Data Cleaning Steps'
    },
    
    # All Models
    'all_models': {
        'ar': 'ðŸ“ˆ Ù…Ù‚Ø§Ø±Ù†Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬',
        'en': 'ðŸ“ˆ All Models Comparison'
    },
    
    # Downloads Section
    'downloads_title': {
        'ar': 'ðŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬',
        'en': 'ðŸ“¥ Download Results'
    },
    'download_excel': {
        'ar': 'ðŸ“Š ØªØ­Ù…ÙŠÙ„ Excel',
        'en': 'ðŸ“Š Download Excel'
    },
    'download_pdf': {
        'ar': 'ðŸ“„ ØªØ­Ù…ÙŠÙ„ PDF',
        'en': 'ðŸ“„ Download PDF'
    },
    'download_word': {
        'ar': 'ðŸ“ ØªØ­Ù…ÙŠÙ„ Word',
        'en': 'ðŸ“ Download Word'
    },
    'download_notebook': {
        'ar': 'ðŸ““ ØªØ­Ù…ÙŠÙ„ Jupyter',
        'en': 'ðŸ““ Download Jupyter'
    },
    'download_model': {
        'ar': 'ðŸ¤– ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬',
        'en': 'ðŸ¤– Download Model'
    },
    
    # Success Messages
    'success_message': {
        'ar': 'ðŸŽ‰ ØªÙ… Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø£Ùˆ Ø±ÙØ¹ Ù…Ù„Ù Ø¬Ø¯ÙŠØ¯.',
        'en': 'ðŸŽ‰ Analysis completed successfully! You can download all files or upload a new file.'
    },
    
    # Error Messages
    'error_no_file': {
        'ar': 'âš ï¸ ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ù„Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ø§Ù‹',
        'en': 'âš ï¸ Please upload a data file first'
    },
    'error_loading': {
        'ar': 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù',
        'en': 'âŒ Error loading file'
    },
    'error_analysis': {
        'ar': 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù„ÙŠÙ„',
        'en': 'âŒ Error during analysis'
    },
    
    # Metrics Names
    'metrics': {
        'accuracy': {'ar': 'Ø§Ù„Ø¯Ù‚Ø©', 'en': 'Accuracy'},
        'precision': {'ar': 'Ø§Ù„Ø¶Ø¨Ø·', 'en': 'Precision'},
        'recall': {'ar': 'Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡', 'en': 'Recall'},
        'f1': {'ar': 'F1', 'en': 'F1 Score'},
        'r2': {'ar': 'RÂ²', 'en': 'RÂ² Score'},
        'mse': {'ar': 'MSE', 'en': 'MSE'},
        'rmse': {'ar': 'RMSE', 'en': 'RMSE'},
        'mae': {'ar': 'MAE', 'en': 'MAE'},
    },
    # Prediction Section
    'prediction_title': {
        'ar': 'âš¡ Ø§Ù„ØªÙˆÙ‚Ø¹ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©',
        'en': 'âš¡ Prediction on New Data'
    },
    'prediction_help': {
        'ar': 'Ø§Ø±ÙØ¹ Ù…Ù„Ù Ø§Ø®ØªØ¨Ø§Ø± (Test File) ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© (Ù…Ø§ Ø¹Ø¯Ø§ Ø§Ù„Ù‡Ø¯Ù) Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª.',
        'en': 'Upload a test file with the same columns (excluding target) to generate predictions.'
    },
    'upload_test': {
        'ar': 'ðŸ“‚ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (CSV/Excel)',
        'en': 'ðŸ“‚ Upload Test File (CSV/Excel)'
    },
    'select_id': {
        'ar': 'Ø§Ø®ØªØ± Ø¹Ù…ÙˆØ¯ Ø§Ù„Ù…Ø¹Ø±Ù (ID) Ù„Ù…Ù„Ù Ø§Ù„ØªØ³Ù„ÙŠÙ…',
        'en': 'Select ID Column for Submission'
    },
    'generate_pred': {
        'ar': 'ðŸš€ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª',
        'en': 'ðŸš€ Generate Predictions'
    },
    'prediction_success': {
        'ar': 'âœ… ØªÙ… Ø§Ù„ØªÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­!',
        'en': 'âœ… Prediction Complete!'
    },
    'download_submission': {
        'ar': 'ðŸ“¥ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„ØªØ³Ù„ÙŠÙ… (Submission.csv)',
        'en': 'ðŸ“¥ Download Submission.csv'
    },
}


def t(key: str, lang: str = 'ar') -> str:
    """
    Get translation for a key.
    
    Args:
        key: Translation key
        lang: Language code ('ar' or 'en')
    
    Returns:
        Translated string
    """
    if key in TRANSLATIONS:
        return TRANSLATIONS[key].get(lang, TRANSLATIONS[key].get('en', key))
    return key


def get_metric_name(metric: str, lang: str = 'ar') -> str:
    """Get translated metric name."""
    metrics = TRANSLATIONS.get('metrics', {})
    if metric.lower() in metrics:
        return metrics[metric.lower()].get(lang, metric)
    return metric.replace('_', ' ').title()


def ltr(text: str) -> str:
    """
    Wrap text in Left-to-Right Unicode markers.
    Use this for English technical terms in Arabic context.
    
    Example: f"Ù†Ù‚ØªØ±Ø­ Ø§Ø³ØªØ®Ø¯Ø§Ù… {ltr('XGBoost')} Ùˆ {ltr('LightGBM')}"
    """
    LRM = '\u200E'  # Left-to-Right Mark
    return f"{LRM}{text}{LRM}"


def rtl(text: str) -> str:
    """
    Wrap text in Right-to-Left Unicode markers.
    Use this for Arabic text embedded in English context.
    """
    RLM = '\u200F'  # Right-to-Left Mark
    return f"{RLM}{text}{RLM}"


def format_mixed_text(text: str, lang: str = 'ar') -> str:
    """
    Automatically fix BiDi issues in mixed Arabic/English text.
    Wraps known English technical terms with LTR markers.
    """
    if lang != 'ar':
        return text
    
    # Common technical terms that need LTR wrapping
    english_terms = [
        'XGBoost', 'LightGBM', 'Random Forest', 'Neural Networks',
        'Logistic Regression', 'Decision Tree', 'Gradient Boosting',
        'AUC-ROC', 'RMSE', 'MAE', 'RÂ²', 'F1-Score', 'Precision', 'Recall',
        'Cross-Validation', 'Train', 'Test', 'Validation', 'SMOTE',
        'PCA', 'Lasso', 'Ridge', 'ElasticNet', 'SVM', 'KNN',
        'Regression', 'Classification', 'total_amount', 'fare_amount',
        'tip_amount', 'DataFrame', 'CSV', 'Excel', 'Parquet', 'JSON',
        'API', 'URL', 'SQL', 'Power BI'
    ]
    
    for term in english_terms:
        if term in text:
            text = text.replace(term, ltr(term))
    
    return text
